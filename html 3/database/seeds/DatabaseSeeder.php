<?php

use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    /**
     * Seed the application's database.
     *
     * @return void
     */
    public function run()
    {
        if (app()->environment('local')) {
            factory(\App\Models\User::class, 20)->create()->each(function ($user) {
                $user->refresh();
                $randPlus = rand(2, 5);
                for ($i = 0; $i < $randPlus; $i++) {
                    $debit_amount = rand(1, 1000);
                    $user->actions()->create([
                        'action' => 'slots (+' . $debit_amount . ')',
                        'balanceBefore' => $user->balance,
                        'balanceAfter' => $user->balance + $debit_amount
                    ]);
                    $user->balance += $debit_amount;
                }
                $user->save();
            });
        }

        \App\Models\Setting::firstOrCreate([
            'min_payment_sum' => 0,
            'min_bonus_sum' => 0,
            'min_withdraw_sum' => 0,
            'bot_timer' => 1
        ]);

        \App\Models\SettingTournament::create();

        \App\Models\Tournament::create([
            'end_at' => now()->startOfWeek()
        ]);

        \App\Models\Profit::create();

        for ($i = 0; $i < 5; $i++) {
            $bonus_levels[] = [
                'title' => "Level {$i}",
                'goal' => 100 + $i,
                'reward' => 10,
                'background' => '#3bdf58'
            ];
        }
        \App\Models\BonusLevel::insert($bonus_levels);

        \App\Models\PlinkoData::create([
            'data' => [
                'low' => [
                    '8' => [5.3, 2.2, 1.1, 0.9, 0.5, 0.9, 1.1, 2.2, 5.3],
                    '9' => [5, 2.2, 1.4, 1.1, 0.6, 0.6, 1.1, 1.4, 2.2, 5],
                    '10' => [9, 3.1, 1.4, 1.1, 0.9, 0.5, 0.9, 1.1, 1.4, 3.1, 9],
                    '11' => [8, 2.9, 1.8, 1.3, 0.9, 0.7, 0.7, 0.9, 1.3, 1.8, 2.9, 8],
                    '12' => [10, 3.3, 1.9, 1.5, 1.1, 0.9, 0.4, 0.9, 1.1, 1.5, 1.9, 3.3, 10],
                    '13' => [8, 4.3, 3.1, 1.9, 1.2, 0.9, 0.6, 0.6, 0.9, 1.2, 1.9, 3.1, 4.3, 8],
                    '14' => [7.1, 5, 2.1, 1.8, 1.4, 1.1, 0.8, 0.5, 0.8, 1.1, 1.4, 1.8, 2.1, 5, 7.1],
                    '15' => [15, 7, 3, 2, 1.4, 1.2, 1.1, 0.5, 0.5, 1.1, 1.2, 1.4, 2, 3, 7, 15],
                    '16' => [16, 8.4, 4, 1.9, 1.4, 1.2, 1.1, 0.9, 0.4, 0.9, 1.1, 1.2, 1.4, 1.9, 4, 8.4, 16]
                ],
                'high' => [
                    '8' => [24, 4, 1.5, 0.3, 0.2, 0.3, 1.5, 4, 24],
                    '9' => [38, 6.4, 2, 0.6, 0.2, 0.2, 0.6, 2, 6.4, 38],
                    '10' => [70, 10, 3.2, 0.7, 0.3, 0.2, 0.3, 0.7, 3.2, 10, 70],
                    '11' => [120, 13, 5.2, 1.4, 0.3, 0.2, 0.2, 0.3, 1.4, 5.2, 13, 120],
                    '12' => [170, 21, 8, 2, 0.7, 0.2, 0.1, 0.2, 0.7, 2, 8, 21, 170],
                    '13' => [260, 32, 11, 4, 1.1, 0.2, 0.1, 0.1, 0.2, 1.1, 4, 11, 32, 260],
                    '14' => [420, 51, 16, 5, 2, 0.3, 0.2, 0.1, 0.2, 0.3, 2, 5, 16, 51, 420],
                    '15' => [620, 83, 27, 8, 3, 0.5, 0.2, 0.1, 0.1, 0.2, 0.5, 3, 8, 27, 63, 620],
                    '16' => [1000, 120, 22, 9, 4, 2, 0.2, 0.2, 0.1, 0.2, 0.2, 2, 4, 9, 22, 120, 1000]
                ],
                'medium' => [
                    '8' => [13, 3.1, 1.3, 0.6, 0.4, 0.6, 1.3, 3.1, 13],
                    '9' => [16, 4.1, 1.8, 0.9, 0.4, 0.4, 0.9, 1.8, 4.1, 16],
                    '10' => [21, 5.2, 1.8, 1.3, 0.6, 0.4, 0.6, 1.3, 1.8, 5.2, 21],
                    '11' => [24, 6, 3.1, 1.8, 0.7, 0.4, 0.4, 0.7, 1.8, 3.1, 6, 24],
                    '12' => [32, 11, 4, 2, 1.1, 0.5, 0.3, 0.5, 1.1, 2, 4, 11, 32],
                    '13' => [40, 15, 5.3, 3, 1.3, 0.6, 0.4, 0.4, 0.6, 1.3, 3, 5.3, 15, 40],
                    '14' => [52, 15, 6.8, 4, 1.7, 1.1, 0.4, 0.2, 0.4, 1.1, 1.7, 4, 6.8, 15, 52],
                    '15' => [80, 18, 11, 5, 3, 1.3, 0.5, 0.2, 0.2, 0.5, 1.3, 3, 5, 11, 18, 80],
                    '16' => [110, 38, 10, 5, 3.1, 1.4, 1.1, 0.4, 0.2, 0.4, 1.1, 1.4, 3.1, 5, 10, 38, 110]
                ]
            ]
        ]);
    }
}
