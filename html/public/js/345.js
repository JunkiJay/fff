"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[345],{8968:(t,e,i)=>{i.d(e,{A:()=>s});var n=i(6314),a=i.n(n)()((function(t){return t[1]}));a.push([t.id,".live-drops[data-v-347d8462]{display:flex;flex:1;flex-direction:column;height:100%;margin-top:0;max-height:400px;padding:0;transition:max-height .5s ease;z-index:1}@media (max-width:1023px){.live-drops[data-v-347d8462]{padding:0 15px}}.live-drops h2[data-v-347d8462]{font-family:Inter,sans-serif;font-size:24px;font-weight:700;line-height:29.05px}.live-drops__items[data-v-347d8462]{border-radius:20px;display:flex;flex-direction:row;gap:12px;height:124px;margin-top:16px;overflow-x:hidden;pointer-events:none;position:relative;transition:all .5s ease}@media (max-width:1023px){.live-drops__items[data-v-347d8462]{height:96px}}.live-drops__items>div[data-v-347d8462]{display:flex;gap:12px}.live-drops__items[data-v-347d8462]::-webkit-scrollbar{display:none}.live-drops__items a[data-v-347d8462]{transition:transform .4s,opacity .4s;z-index:2}.live-drops__items a[data-v-347d8462]:hover{box-shadow:0 0 18.4px 0 hsla(0,0%,100%,.29);transition:box-shadow .3s ease}@media (max-width:1023px){.live-drops__items[data-v-347d8462]{margin-top:14px}}.live-drops.is_open[data-v-347d8462]{max-height:36px}@media (max-width:1023px){.live-drops.is_open[data-v-347d8462]{max-height:36px}.live-drops h2[data-v-347d8462]{font-size:18px}}.slide-right-enter-active[data-v-347d8462],.slide-right-leave-active[data-v-347d8462]{transition:transform .3s ease,opacity .3s ease}.slide-right-enter[data-v-347d8462]{transform:translateX(-100%)}.slide-right-leave-to[data-v-347d8462]{transform:translateX(100%)}.live-drop[data-v-347d8462]{align-items:flex-start;background-color:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,100%,.15);border-radius:24px;display:flex;flex-shrink:0;font-family:Oswald!important;font-size:18px;font-weight:500;gap:10px;padding:8px;text-decoration:none}.live-drop[data-v-347d8462],.live-drop__img[data-v-347d8462]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.live-drop__img[data-v-347d8462]{aspect-ratio:122/182;border-radius:16px;height:100%;-o-object-fit:cover;object-fit:cover;width:82px}@media (max-width:1023px){.live-drop__img[data-v-347d8462]{width:60px}}.live-drop__info[data-v-347d8462]{display:flex;flex-direction:column;height:100%;justify-content:space-between;padding-bottom:8px;padding-top:8px;width:158px}@media (max-width:1023px){.live-drop__info[data-v-347d8462]{padding:0}}.live-drop__number[data-v-347d8462]{color:#fff;font-family:Inter,sans-serif;font-size:24px;font-weight:700;line-height:29.05px;margin-bottom:6px;text-align:left;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none;text-underline-position:from-font}@media (max-width:1023px){.live-drop__number[data-v-347d8462]{font-size:18px;line-height:21.78px}}.live-drop__username[data-v-347d8462]{color:#9e9aa1;font-family:Inter,sans-serif;font-size:16px;font-weight:500;line-height:19.36px;margin-bottom:16px;text-align:left;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none;text-underline-position:from-font}@media (max-width:1023px){.live-drop__username[data-v-347d8462]{font-size:14px;line-height:16.94px}}.live-drop__slot[data-v-347d8462]{color:#fff;font-family:Inter,sans-serif;font-size:18px;font-style:italic;font-weight:400;line-height:21.78px;text-align:left;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none;text-underline-position:from-font}@media (max-width:1023px){.live-drop__slot[data-v-347d8462]{font-size:16px;font-weight:400;line-height:19.36px}}",""]);const s=a},5559:(t,e,i)=>{i.d(e,{A:()=>s});var n=i(6314),a=i.n(n)()((function(t){return t[1]}));a.push([t.id,"@media (max-width:1024px){.form_share{align-items:center;.form{max-width:100%;order:3;padding-bottom:0}.form__buttons.chance button{display:block;height:40px}}.form__content.chance input{outline:none;text-align:center}}@media (max-width:900px){.form__buttons.bet{display:none!important}}",""]);const s=a},4680:(t,e,i)=>{i.d(e,{A:()=>l});const n={components:{Button:i(585).A},data:function(){return{isOpen:!1,history:[],filteredHistory:[],pendingWins:[],placeholderImage:"/assets/image/soon.png",isLoading:!0,animationDelay:500,intervalId:null}},created:function(){this.loadFromStorage(),this.setupSocketListeners()},methods:{loadFromStorage:function(){try{var t=localStorage.getItem("slotsHistory");if(t){var e=JSON.parse(t);Array.isArray(e)&&e.length>0&&(this.history=e,this.filteredHistory=e,this.isLoading=!1)}}catch(t){console.error("Error loading history:",t),this.clearHistory()}},setupSocketListeners:function(){var t=this;this.$socket.on("slotsHistory",(function(e){e.win>=1&&(e.uniqueKey=t.generateUniqueId(),t.history.unshift(e),localStorage.setItem("slotsHistory",JSON.stringify(t.history)),t.isLoading?(t.filteredHistory.unshift(e),t.filteredHistory.length>=4&&(t.isLoading=!1)):(t.pendingWins.push(e),t.intervalId||t.startProcessingWins()))}))},clearHistory:function(){this.history=[],this.filteredHistory=[],localStorage.removeItem("slotsHistory")},generateUniqueId:function(){new Set},startProcessingWins:function(){var t=this;this.intervalId=setInterval((function(){if(t.pendingWins.length>0){var e=t.pendingWins.shift();t.filteredHistory.unshift(e),t.filteredHistory.length>10&&t.filteredHistory.pop()}else clearInterval(t.intervalId),t.intervalId=null}),this.animationDelay)},getPlaceholder:function(){return this.placeholderImage},onImageError:function(t){t.target.src=this.getPlaceholder()},onOpen:function(){this.isOpen=!this.isOpen}},watch:{history:{handler:function(t){t.length>100&&(this.history=t.slice(0,100),localStorage.setItem("slotsHistory",JSON.stringify(this.history)))},deep:!0}},beforeDestroy:function(){this.$socket.off("getHistory"),this.$socket.off("slotsHistory"),this.intervalId&&clearInterval(this.intervalId)}};var a=i(5072),s=i.n(a),o=i(8968),r={insert:"head",singleton:!1};s()(o.A,r);o.A.locals;const l=(0,i(4486).A)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"live-drops lg:p-4 rounded-[24px]",class:{is_open:t.isOpen}},[e("div",{staticClass:"flex justify-between items-center"},[e("h2",{staticClass:"font-[Inter] uppercase text-[var(--color-text)] font-bold"},[t._v("Лента выигрышей")]),t._v(" "),e("Button",{staticClass:"text_button sm:text-[16px] bg-[var(--color-primary)] text-white px-2 sm:px-4 rounded-[8px] flex items-center gap-2 sm:gap-4 h-[34px]",attrs:{variant:"default"},nativeOn:{click:function(e){return t.onOpen.apply(null,arguments)}}},[t._v("\n            "+t._s(t.isOpen?"Развернуть":"Свернуть")+"\n        ")])],1),t._v(" "),e("div",{staticClass:"live-drops__items"},[e("div",{attrs:{name:"slide-right",mode:"out-in"}},t._l(t.filteredHistory,(function(i,n){return e("router-link",{key:n,staticClass:"live-drop",attrs:{draggable:"false",to:"/slots/game/"+i.game_id}},[e("img",{staticClass:"live-drop__img",attrs:{src:i.image,draggable:"false"}}),t._v(" "),e("div",{staticClass:"live-drop__info"},[e("span",{staticClass:"live-drop__number"},[t._v(t._s(i.win.toFixed(2))+" ₽")]),t._v(" "),e("span",{staticClass:"live-drop__username"},[t._v("\n                        "+t._s(i.username.length>15?i.username.substring(0,15)+"..":i.username)+"\n                    ")]),t._v(" "),e("span",{staticClass:"live-drop__slot"},[t._v("\n                        "+t._s(i.slot_name&&i.slot_name.length>15?i.slot_name.substring(0,12)+"..":i.slot_name)+"\n                    ")])])])})),1)])])}),[],!1,null,"347d8462",null).exports},4748:(t,e,i)=>{i.d(e,{A:()=>n});const n=(0,i(4486).A)({},(function(){var t=this._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none"}},[t("g",{attrs:{"clip-path":"url(#clip0_464_66043)"}},[t("path",{attrs:{d:"M6 7.2H16M14.8889 7.2V14.9C14.8889 15.1917 14.7718 15.4715 14.5635 15.6778C14.3551 15.8841 14.0725 16 13.7778 16H8.22222C7.92754 16 7.64492 15.8841 7.43655 15.6778C7.22817 15.4715 7.11111 15.1917 7.11111 14.9V7.2M8.77778 7.2V6.1C8.77778 5.80826 8.89484 5.52847 9.10321 5.32218C9.31159 5.11589 9.5942 5 9.88889 5H12.1111C12.4058 5 12.6884 5.11589 12.8968 5.32218C13.1052 5.52847 13.2222 5.80826 13.2222 6.1V7.2",stroke:"inherite","stroke-width":"1.1","stroke-linecap":"round","stroke-linejoin":"round"}})]),this._v(" "),t("defs",[t("clipPath",{attrs:{id:"clip0_464_66043"}},[t("rect",{attrs:{width:"22",height:"22",fill:"inherite"}})])])])}),[],!1,null,null,null).exports},5726:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});var n=i(4680),a=i(585),s=i(4748),o=i(4335);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){var n;return n=function(t,e){if("object"!=r(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==r(n)?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const u={components:{LiveDropList:n.A,Button:a.A,Trash:s.A},data:function(){return{lastCall:0,bet:"1.00",goal:"1.50",result:1.5,noty:{mess:null,type:null}}},mounted:function(){this.updateResult()},methods:{updateResult:function(){var t=parseFloat(this.bet),e=parseFloat(this.goal);this.result=(t*e).toFixed(2)},typeBet:function(t){var e,i=parseFloat((null===(e=this.$store.state.user)||void 0===e?void 0:e.balance)||0),n=parseFloat(this.bet),a={min:function(){return"1.00"},max:function(){return i.toFixed(2)},"/2":function(){return Math.max(n/2,1).toFixed(2)},x2:function(){return Math.min(2*n,i).toFixed(2)},default:function(){return n.toFixed(2)}};this.bet=(a[t]||a.default)()},play:function(){var t,e=this,i=Date.now();if(i-this.lastCall<100)this.noty={mess:"Слишком частый вызов метода",type:"error"};else{this.lastCall=i;var n=parseFloat((null===(t=this.$store.state.user)||void 0===t?void 0:t.balance)||0),a=parseFloat(this.bet);a>n?this.noty={mess:"Недостаточно средств для ставки",type:"error"}:(this.noty={},o.A.post("/bubbles/play",{bet:a,goal:this.goal}).then((function(t){var i=t.data;if(i.error)e.noty={mess:i.message,type:"error"};else if(e.$store.commit("setUser",d(d({},e.$store.state.user),{},{balance:i.balance})),e.noty={mess:i.text,type:i.isWin?"success":"error"},e.isMute){var n=i.isWin?"/assets/sounds/win_dice.wav":"/assets/sounds/loose.wav";new Audio(n).play()}})).catch((function(t){console.error("Ошибка при выполнении игры:",t),e.noty={mess:"Ошибка при выполнении игры.",type:"error"}})))}}},watch:{goal:function(){parseFloat(this.goal)<1&&(this.goal="1"),parseFloat(this.goal)>5e3&&(this.goal="5000.00"),this.updateResult()},bet:function(){parseFloat(this.bet)<1&&(this.bet="1.00"),parseFloat(this.bet)>1e6&&(this.bet="1000000.00"),this.updateResult()}},computed:{isMute:function(){return this.$store.state.isMute}}};var p=i(5072),f=i.n(p),v=i(5559),h={insert:"head",singleton:!1};f()(v.A,h);v.A.locals;const m=(0,i(4486).A)(u,(function(){var t,e=this,i=e._self._c;return i("div",{staticClass:"flex flex-col gap-8 m-3 md:m-0"},[i("div",{staticClass:"form_share flex flex-col lg:flex-row justify-between items-center gap-[24px] lg:gap-[58px] p-3.5 lg:p-8 rounded-[24px] bg-[var(--color-content)]"},[i("div",{staticClass:"max-w-[330px] w-full form order-2 lg:order-1"},[i("label",{staticClass:"form__label"},[e._v("Ставка")]),e._v(" "),i("div",{staticClass:"form__content"},[i("div",{staticClass:"form__input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bet,expression:"bet"}],attrs:{type:"text"},domProps:{value:e.bet},on:{focusout:function(t){e.bet=+e.bet<1?"1.00":e.bet},change:function(t){return e.typeBet("default")},input:function(t){t.target.composing||(e.bet=t.target.value)}}}),e._v(" "),i("button",{staticClass:"form__trash",on:{click:function(t){e.bet="1.00"}}},[i("Trash")],1),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("min")}}},[e._v("MIN")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("max")}}},[e._v("MAX")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("x2")}}},[e._v("X2")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("/2")}}},[e._v("/2")])],1),e._v(" "),i("div",{staticClass:"form__buttons bet"},[i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("min")}}},[e._v("MIN")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("max")}}},[e._v("MAX")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("x2")}}},[e._v("X2")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){return e.typeBet("/2")}}},[e._v("/2")])],1)])]),e._v(" "),i("div",{staticClass:"flex flex-col w-full order-1 lg:order-2"},[i("div",[i("h2",{staticClass:"text-center text-[var(--color-primary)] text-[62px] font-[500]"},[e._v(e._s(parseFloat(e.result).toFixed(2)))]),e._v(" "),i("div",{staticClass:"text-center text-[var(--color-text)]"},[e._v("Возможный выигрыш")])]),e._v(" "),i("div",{staticClass:"p-0 mt-[24px] w-full"},[i("Button",{staticClass:"w-full",attrs:{variant:"primary"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}},nativeOn:{click:function(t){return e.play.apply(null,arguments)}}},[e._v(" Играть\n                ")]),e._v(" "),i("div",{staticClass:"mt-3 h-[44px] rounded-[8px] text-white w-full flex items-center justify-center",class:["success"===e.noty.type?"bg-[#47D524]":"bg-[#D82828]",null!==(t=e.noty.mess)&&void 0!==t?t:"opacity-0"]},[e._v("\n                    "+e._s(e.noty.mess)+"\n                ")])],1)]),e._v(" "),i("div",{staticClass:"max-w-[330px] w-full form order-3"},[i("label",{staticClass:"form__label"},[e._v("Цель игры")]),e._v(" "),i("div",{staticClass:"form__content chance"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.goal,expression:"goal"}],staticClass:"form__input",attrs:{type:"text"},domProps:{value:e.goal},on:{change:function(t){e.goal=(1*e.goal).toFixed(2)},input:function(t){t.target.composing||(e.goal=t.target.value)}}}),e._v(" "),i("div",{staticClass:"form__buttons chance"},[i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){e.goal="2.00"}}},[e._v("2X")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){e.goal="3.00"}}},[e._v("3X")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){e.goal="5.00"}}},[e._v("5X")]),e._v(" "),i("Button",{staticClass:"form__button",attrs:{variant:"default"},nativeOn:{click:function(t){e.goal="15.00"}}},[e._v("15X")])],1)])])]),e._v(" "),i("LiveDropList")],1)}),[],!1,null,null,null).exports}}]);